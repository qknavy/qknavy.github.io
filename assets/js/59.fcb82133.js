(window.webpackJsonp=window.webpackJsonp||[]).push([[59],{570:function(s,a,t){"use strict";t.r(a);var e=t(4),n=Object(e.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"title"}),t("p",[s._v("ElasticSearch是文档型数据库，不是关系型数据库，不具备事务特性，所以千万不要运用在严格事务性场景的应用项目中")])]),s._v(" "),t("h2",{attrs:{id:"_1、es安装方式选择"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1、es安装方式选择"}},[s._v("#")]),s._v(" 1、ES安装方式选择")]),s._v(" "),t("h3",{attrs:{id:"_1-1、下载对应的版本-7-8-0"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-1、下载对应的版本-7-8-0"}},[s._v("#")]),s._v(" 1.1、下载对应的版本[7.8.0]")]),s._v(" "),t("blockquote",[t("p",[s._v("百度网盘链接: https://pan.baidu.com/s/1MhC_rgWtKGBVkfnDxQbTkA  密码: d2ns")])]),s._v(" "),t("p",[s._v("在选择"),t("code",[s._v("Elastic Stack")]),s._v("版本的时候，建议是各个软件使用统一的版本，比如"),t("code",[s._v("Elastic Search")]),s._v("使用的是"),t("code",[s._v("7.8.0")]),s._v("，那么"),t("code",[s._v("kibana")]),s._v("、"),t("code",[s._v("metricbeat")]),s._v("也同样使用"),t("code",[s._v("7.8.1")]),s._v("，否则会存在版本之间的兼容性问题")]),s._v(" "),t("blockquote",[t("p",[t("a",{attrs:{href:"https://www.elastic.co/cn/downloads/",target:"_blank",rel:"noopener noreferrer"}},[s._v("官方链接"),t("OutboundLink")],1)])]),s._v(" "),t("p",[s._v("在此推荐一款Chrome插件"),t("code",[s._v("elasticsearch head")]),s._v("，github "),t("a",{attrs:{href:"https://github.com/mobz/elasticsearch-head",target:"_blank",rel:"noopener noreferrer"}},[s._v("链接"),t("OutboundLink")],1),s._v("，或参考"),t("a",{attrs:{href:"http://mobz.github.io/elasticsearch-head/",target:"_blank",rel:"noopener noreferrer"}},[s._v("链接"),t("OutboundLink")],1)]),s._v(" "),t("h3",{attrs:{id:"_1-2、安装方式"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-2、安装方式"}},[s._v("#")]),s._v(" 1.2、安装方式")]),s._v(" "),t("ul",[t("li",[s._v("购买SAAS产品（腾讯云、阿里云、ES云）")]),s._v(" "),t("li",[s._v("离线包（离线包版本选择方式，建议gz类似绿色版，不建议rpm方式安装）")]),s._v(" "),t("li",[s._v("在线包（yum、apt-get、homebrew等方式，但是可控性差）")]),s._v(" "),t("li",[s._v("容器docker方式运行（由于docker需要做各种映射等比较繁琐，不建议使用）")])]),s._v(" "),t("p",[s._v("综合考虑，建议gz离线包的方式安装")]),s._v(" "),t("h2",{attrs:{id:"_2、必备系统环境配置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2、必备系统环境配置"}},[s._v("#")]),s._v(" 2、必备系统环境配置")]),s._v(" "),t("h3",{attrs:{id:"_2-1、操作系统选择"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-1、操作系统选择"}},[s._v("#")]),s._v(" 2.1、操作系统选择")]),s._v(" "),t("p",[s._v("推荐使用"),t("code",[s._v("centos")]),s._v("或者"),t("code",[s._v("Ubuntu18")]),s._v("，不建议"),t("code",[s._v("windows")]),s._v("和"),t("code",[s._v("Mac os")])]),s._v(" "),t("h3",{attrs:{id:"_2-2、系统环境变量设置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-2、系统环境变量设置"}},[s._v("#")]),s._v(" 2.2、系统环境变量设置")]),s._v(" "),t("ul",[t("li",[s._v("关闭防火墙（或者开放端口）")])]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# centos下")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("service")]),s._v(" firewalld stop\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("chkconfig")]),s._v(" firewalld off\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("ul",[t("li",[s._v("设置虚拟内存大小(mmpfile)")]),s._v(" "),t("li",[s._v("禁用内存交换")])]),s._v(" "),t("p",[s._v("内存不够时，交换到磁盘；内存锁定；")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# /etc/sysctl.conf")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#禁用内存与硬盘交换")]),s._v("\nvm.swappiness"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 设置虚拟内存大小")]),s._v("\nvm.max_map_count"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("262144")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br")])]),t("ul",[t("li",[s._v("设置文件句柄值")])]),s._v(" "),t("p",[s._v("es索引由很多文件组成，打卡地的文件数量多")]),s._v(" "),t("ul",[t("li",[s._v("设置进程线程限制")])]),s._v(" "),t("p",[s._v("es进程内置多种线程池，线程数量多")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# /etc/security/limits.conf")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 进程线程数")]),s._v("\n*   soft nproc "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("131072")]),s._v("\n*   hard nproc "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("131072")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 文件句柄数")]),s._v("\n*   soft nofile "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("131072")]),s._v("\n*   hard nofile "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("131072")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 内存锁定交换")]),s._v("\n*   soft memlock    unlimited\n*   hard memlock    unlimited\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br")])]),t("ul",[t("li",[s._v("专用账号")])]),s._v(" "),t("p",[s._v("新版的es为了安全考虑，不允许使用root账号运行，所以需要单独创建一个专用账号（后续所有es相关操作都在这个账号下运行）")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 创建es账号，入elastic")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("useradd")]),s._v(" elastic\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 授权es程序目录给elastic账号权限")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 假设所有es相关的程序、数据、日志等目录都在/home/qknavy/ES目录")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("chown")]),s._v(" -R elastic:elastic /home/qknavy/ES\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br")])]),t("h3",{attrs:{id:"_2-3、jvm环境变量"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-3、jvm环境变量"}},[s._v("#")]),s._v(" 2.3、JVM环境变量")]),s._v(" "),t("ul",[t("li",[s._v("ES默认自带了jdk")])]),s._v(" "),t("p",[s._v("默认环境下无需设置")]),s._v(" "),t("ul",[t("li",[s._v("建议设置java环境变量")])]),s._v(" "),t("p",[s._v("常用自定义java命令使用"),t("code",[s._v("jps")]),s._v(","),t("code",[s._v("jconsole")]),s._v("等。"),t("br"),s._v("\n单节点可能会存在多节点部署或者其他java程序")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# /etc/profile")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#ES最新版本自带jdk版本，默认可以不需要配置，但是为了方便管理，建议还是手动配置一下，便于安装其他java程序辅助")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 本内容要求安装jdk14.x")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("JAVA_HOME")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/home/qknavy/ES/jdk-14.0.2\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("JRE_HOME")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/home/qknavy/ES/jdk-14.0.2/jre\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("PATH")])]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$JAVA_HOME")]),s._v("/bin:"),t("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("$PATH")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("CLASSPATH")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$JAVA_HOME")]),s._v("/lib:"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$JRE_HOME")]),s._v("/lib\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br")])]),t("p",[s._v("配置完执行"),t("code",[s._v("source /etc/profile")]),s._v("使之生效")]),s._v(" "),t("h3",{attrs:{id:"_2-4、elastic的配置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-4、elastic的配置"}},[s._v("#")]),s._v(" 2.4、Elastic的配置")]),s._v(" "),t("ul",[t("li",[t("p",[s._v("ES文件目录")]),s._v(" "),t("ul",[t("li",[s._v("bin")])]),s._v(" "),t("p",[s._v("启动脚本、常用工具脚本")]),s._v(" "),t("ul",[t("li",[s._v("config")])]),s._v(" "),t("p",[s._v("配置目录")]),s._v(" "),t("ul",[t("li",[s._v("jdk")])]),s._v(" "),t("p",[s._v("自带jdk，可选用")]),s._v(" "),t("ul",[t("li",[s._v("lib/modules")])]),s._v(" "),t("p",[s._v("程序包")]),s._v(" "),t("ul",[t("li",[s._v("plugins")])]),s._v(" "),t("p",[s._v("自带的插件、三方插件")]),s._v(" "),t("ul",[t("li",[s._v("其它")])]),s._v(" "),t("p",[s._v("data： 默认数据目录"),t("br"),s._v("\nlogs： 默认日志目录")])]),s._v(" "),t("li",[t("p",[s._v("脚本命令")]),s._v(" "),t("ul",[t("li",[s._v("启动es脚本")])]),s._v(" "),t("p",[t("strong",[s._v("windows系统")]),s._v("：elasticsearch.bat"),t("br"),s._v(" "),t("strong",[s._v("Linux系统")]),s._v("："),t("br"),s._v("\n当前窗口启动：./elasticsearch"),t("br"),s._v("\n后台进程启动：./elasticsearch -d")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://qknavy.oss-cn-huhehaote.aliyuncs.com/%E5%9B%BE%E7%89%87/es%E8%84%9A%E6%9C%AC%E7%9B%AE%E5%BD%95.jpg",alt:"截图"}})]),s._v(" "),t("ul",[t("li",[s._v("辅助工具")])])]),s._v(" "),t("li",[t("p",[s._v("配置文件")])])]),s._v(" "),t("blockquote",[t("p",[s._v("elasticsearch.yaml")])]),s._v(" "),t("p",[s._v("数据目录："),t("br"),s._v("\n日志目录："),t("br"),s._v("\n内存锁定："),t("br"),s._v("\n线程数：")]),s._v(" "),t("blockquote",[t("p",[s._v("jvm.options")])]),s._v(" "),t("p",[t("strong",[s._v("jdk选择")]),s._v("：可选择，可以自主配置或者选择默认自带的jdk"),t("br"),s._v(" "),t("strong",[s._v("GC选择")]),s._v("：7.8.1已经采用G1，原则上jdk14以上采用G1，以下版本采用CMS（不需要自己配置）"),t("br"),s._v(" "),t("strong",[s._v("堆栈大小")]),s._v("：不超过1/2系统内存，空余1/2闲置内存；内存上线不超过32G（不等于32G）；默认1g；"),t("br"),s._v(" "),t("strong",[s._v("GC日志")]),s._v("：")]),s._v(" "),t("p",[s._v("安全、插件、环境、迁移")]),s._v(" "),t("h2",{attrs:{id:"_4、kibana安装配置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4、kibana安装配置"}},[s._v("#")]),s._v(" 4、Kibana安装配置")]),s._v(" "),t("h3",{attrs:{id:"_4-1、文件目录"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-1、文件目录"}},[s._v("#")]),s._v(" 4.1、文件目录")]),s._v(" "),t("blockquote",[t("p",[s._v("主要关注"),t("code",[s._v("bin")]),s._v("、"),t("code",[s._v("config")]),s._v("两个目录即可")])]),s._v(" "),t("p",[t("img",{attrs:{src:"https://qknavy.oss-cn-huhehaote.aliyuncs.com/%E5%9B%BE%E7%89%87/kibana%E7%9B%AE%E5%BD%95.jpg",alt:"截图"}})]),s._v(" "),t("ul",[t("li",[s._v("bin")])]),s._v(" "),t("p",[s._v("启动脚本"),t("code",[s._v("kibana")]),s._v("、常用工具脚本")]),s._v(" "),t("ul",[t("li",[s._v("config")])]),s._v(" "),t("p",[s._v("配置文件")]),s._v(" "),t("ul",[t("li",[s._v("其它")])]),s._v(" "),t("p",[s._v("默认，无需关心")]),s._v(" "),t("h2",{attrs:{id:"_5、单节点部署模式"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5、单节点部署模式"}},[s._v("#")]),s._v(" 5、单节点部署模式")]),s._v(" "),t("h2",{attrs:{id:"_6、集群部署模式"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_6、集群部署模式"}},[s._v("#")]),s._v(" 6、集群部署模式")])])}),[],!1,null,null,null);a.default=n.exports}}]);