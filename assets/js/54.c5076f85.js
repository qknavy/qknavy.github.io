(window.webpackJsonp=window.webpackJsonp||[]).push([[54],{566:function(s,a,t){"use strict";t.r(a);var e=t(4),n=Object(e.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("blockquote",[t("p",[s._v("本文所用到的镜像：链接：https://pan.baidu.com/s/1mdXc7Arw21MLlJGp95g0yw 提取码：j2fh")])]),s._v(" "),t("h2",{attrs:{id:"_1、准备工作"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1、准备工作"}},[s._v("#")]),s._v(" 1、准备工作")]),s._v(" "),t("h3",{attrs:{id:"_1-1、系统更新"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-1、系统更新"}},[s._v("#")]),s._v(" 1.1、系统更新")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt-get")]),s._v(" update\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt-get")]),s._v(" upgrade\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("h3",{attrs:{id:"_1-2、修改hosts文件-处理ip主机名的映射"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-2、修改hosts文件-处理ip主机名的映射"}},[s._v("#")]),s._v(" 1.2、修改hosts文件，处理ip主机名的映射")]),s._v(" "),t("h2",{attrs:{id:"_2、安装docker"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2、安装docker"}},[s._v("#")]),s._v(" 2、安装docker")]),s._v(" "),t("h3",{attrs:{id:"_2-1、docker的安装"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-1、docker的安装"}},[s._v("#")]),s._v(" 2.1、docker的安装")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt-get")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" docker.io\n\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("h3",{attrs:{id:"_2-2、配置docker镜像加速"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-2、配置docker镜像加速"}},[s._v("#")]),s._v(" 2.2、配置docker镜像加速")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" -p /etc/docker\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("tee")]),s._v(" /etc/docker/daemon.json "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<<-")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('\'EOF\'\n{\n  "registry-mirrors": ["https://f9b9xyar.mirror.aliyuncs.com"]\n}\nEOF')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" systemctl daemon-reload\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" systemctl restart docker\n\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br")])]),t("h2",{attrs:{id:"_3、修改相关的系统配置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3、修改相关的系统配置"}},[s._v("#")]),s._v(" 3、修改相关的系统配置")]),s._v(" "),t("h3",{attrs:{id:"_3-1、更改存储驱动"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-1、更改存储驱动"}},[s._v("#")]),s._v(" 3.1、更改存储驱动")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("docker info "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" Cgroup\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sed")]),s._v(" -i "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'s#ExecStart=/usr/bin/dockerd#ExecStart=/usr/bin/dockerd --exec-opt native.cgroupdriver=systemd#g'")]),s._v(" /lib/systemd/system/docker.service\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 重启生效")]),s._v("\nsystemctl daemon-reload\nsystemctl restart docker\n\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br")])]),t("h3",{attrs:{id:"_3-2、关闭防火墙"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-2、关闭防火墙"}},[s._v("#")]),s._v(" 3.2、关闭防火墙")]),s._v(" "),t("h3",{attrs:{id:"_3-3、关闭selinux"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-3、关闭selinux"}},[s._v("#")]),s._v(" 3.3、关闭selinux")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" selinux-utils\nsetenforce "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("h3",{attrs:{id:"_3-4、关闭swap"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-4、关闭swap"}},[s._v("#")]),s._v(" 3.4、关闭swap")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("swapoff -a\n\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("h3",{attrs:{id:"_3-5、配置iptables的accept规则"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-5、配置iptables的accept规则"}},[s._v("#")]),s._v(" 3.5、配置iptables的ACCEPT规则")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("iptables -F "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" iptables -X "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" iptables -F -t nat "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" iptables -X -t nat "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" iptables -P FORWARD ACCEPT\n\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("h3",{attrs:{id:"_3-6、设置k8s系统环境配置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-6、设置k8s系统环境配置"}},[s._v("#")]),s._v(" 3.6、设置k8s系统环境配置")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<<")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("EOF"),t("span",{pre:!0,attrs:{class:"token bash punctuation"}},[s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("  /etc/sysctl.d/k8s.conf")]),s._v("\nnet.bridge.bridge-nf-call-ip6tables = 1\nnet.bridge.bridge-nf-call-iptables = 1\nEOF")]),s._v("\n\nsysctl --system\n\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br")])]),t("h2",{attrs:{id:"_4、安装kubeadm、kubectl、kubelet"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4、安装kubeadm、kubectl、kubelet"}},[s._v("#")]),s._v(" 4、安装kubeadm、kubectl、kubelet")]),s._v(" "),t("h3",{attrs:{id:"_4-1、添加阿里云kube源"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-1、添加阿里云kube源"}},[s._v("#")]),s._v(" 4.1、添加阿里云kube源")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt-get")]),s._v(" update "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt-get")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" -y apt-transport-https\n\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("curl")]),s._v(" https://mirrors.aliyun.com/kubernetes/apt/doc/apt-key.gpg "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" apt-key "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" -\n\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" /etc/apt/sources.list.d/kubernetes.list "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<<")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("EOF\ndeb https://mirrors.aliyun.com/kubernetes/apt/ kubernetes-xenial main\nEOF")]),s._v("\n\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br")])]),t("h3",{attrs:{id:"_4-2、安装"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-2、安装"}},[s._v("#")]),s._v(" 4.2、安装")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt-get")]),s._v(" update\n\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt-get")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" -y "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("kubelet")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.14")]),s._v(".8-00  "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("kubeadm")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.14")]),s._v(".8-00 "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("kubectl")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.14")]),s._v(".8-00\n\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("h2",{attrs:{id:"_5、正式安装k8s集群"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5、正式安装k8s集群"}},[s._v("#")]),s._v(" 5、正式安装k8s集群")]),s._v(" "),t("h3",{attrs:{id:"_5-1、加载所需要的镜像"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5-1、加载所需要的镜像"}},[s._v("#")]),s._v(" 5.1、加载所需要的镜像")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看所需要的镜像及版本")]),s._v("\nkubeadm config images list\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 加载镜像（kubeadm-1.14.8.tar为开篇从网盘下载的tar文件）")]),s._v("\ndocker load -i kubeadm-1.14.8.tar\n\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br")])]),t("p",[t("br"),t("br"),t("br"),t("br"),s._v(" "),t("em",[s._v("以上内容需要在主、从节点上都执行")]),s._v(" "),t("br"),t("br"),t("br"),t("br")]),s._v(" "),t("h3",{attrs:{id:"_5-2、初始化master"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5-2、初始化master"}},[s._v("#")]),s._v(" 5.2、初始化master")]),s._v(" "),t("blockquote",[t("p",[s._v("执行下面命令前记得修改apiserver的ip")])]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("kubeadm init --pod-network-cidr"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.244")]),s._v(".0.0/16 --apiserver-advertise-address"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".0.16 --service-cidr"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.1")]),s._v(".0.0/16  --kubernetes-version v1.14.8 \n\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("blockquote",[t("p",[s._v("注意操作成功之后的控制台输出，最好复制保存一下")])]),s._v(" "),t("h3",{attrs:{id:"_5-3、创建认证"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5-3、创建认证"}},[s._v("#")]),s._v(" 5.3、创建认证")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" -p "),t("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("$HOME")]),s._v("/.kube\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("cp")]),s._v(" -i /etc/kubernetes/admin.conf "),t("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("$HOME")]),s._v("/.kube/config\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("chown")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("id")]),s._v(" -u"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token variable"}},[t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("id")]),s._v(" -g"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v(" "),t("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("$HOME")]),s._v("/.kube/config\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#执行完毕可查看pod")]),s._v("\nkubectl get pods --all-namespaces\n\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br")])]),t("h3",{attrs:{id:"_5-4、加入从节点"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5-4、加入从节点"}},[s._v("#")]),s._v(" 5.4、加入从节点")]),s._v(" "),t("blockquote",[t("p",[s._v("在每个从节点上执行下面命令（注意修改ip为主节点的ip）")])]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("kubeadm "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("join")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".0.16:6443 --token 0bklb0.x0xwsm7dspnv9yp5 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n    --discovery-token-ca-cert-hash sha256:226c8485ac3e7fc4c0995155cd7dc9ba7f89a0663a0b27564d75521c49dbd02b\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 执行完毕之后在主节点上查看集群节点：")]),s._v("\nkubectl get nodes\n\n发现几个节点都是NotReady\n\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br")])]),t("h3",{attrs:{id:"_5-5、安装网络插件"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5-5、安装网络插件"}},[s._v("#")]),s._v(" 5.5、安装网络插件")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 可以直接在主节点上执行下面命令，也可以先将这个yaml文件下载到本地再执行")]),s._v("\nkubectl apply -f https://raw.githubusercontent.com/coreos/flannel/a70459be0084506e4ec919aa1c114638878db11b/Documentation/kube-flannel.yml\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 执行成功之后再查看集群节点")]),s._v("\nkubectl get nodes\n此时应该都是Ready状态\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br")])]),t("blockquote",[t("p",[s._v("kube-flannel.yaml\n链接: https://pan.baidu.com/s/1F6KLiwVWOwihFXmMSOn9Kg  密码: 1agt\n--来自百度网盘超级会员V5的分享")])]),s._v(" "),t("p",[s._v("至此，k8s基本集群搭建完成，剩下的需要什么组件自己视情况创建，比如nginx-ingress-controller，可以到对应的官方找到yaml文件")])])}),[],!1,null,null,null);a.default=n.exports}}]);